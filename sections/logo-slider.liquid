<div class="logo-slider">
  <div>
    <img src="https://picsum.photos/100">
    <img src="https://picsum.photos/102">
    <img src="https://picsum.photos/103">
    <img src="https://picsum.photos/104">
    <img src="https://picsum.photos/105">
    <img src="https://picsum.photos/106">
    <img src="https://picsum.photos/107">
    <img src="https://picsum.photos/108">
  </div>

  <div>
    <img src="https://picsum.photos/100">
    <img src="https://picsum.photos/102">
    <img src="https://picsum.photos/103">
    <img src="https://picsum.photos/104">
    <img src="https://picsum.photos/105">
    <img src="https://picsum.photos/106">
    <img src="https://picsum.photos/107">
    <img src="https://picsum.photos/108">
  </div>
</div>

{% stylesheet %}
    .logo-slider {

    $min-image-size: 50px;
    $max-image-size: 100px;

    --image-size: #{$max-image-size};

    border: 1px solid #575757;
    padding: 20px;
    overflow: hidden;
    max-width: 900px;
    width: 100%;
    margin: 0 auto;
  	position: relative;
  	display: flex;

  	&:hover div {
  		animation-play-state: paused;
  	}
  }

   .logo-slider > div {
  		display: flex;
  		position: relative;
  		animation: marquee 15s linear infinite;
      justify-content: space-around;

      // Debug: This is just to help see where the loop happens
      // &:nth-of-type(1) { &, img { border:1px dashed red;  }}
      // &:nth-of-type(2) { &, img { border:1px dashed blue; }}

      // You may need this if there are too few images for the banner width
      //min-width:100%;

  	}

  	img {
  		display: block;
  		min-width: var(--image-size);
  		height: var(--image-size);
  		margin: 0 1vw;
  	}

    &:after {
  		content: "";
  		position: absolute;
  		width: 100%;
  		height: 100%;
  		left: 0;
  		top: 0;
  		background: linear-gradient(to right, white, rgba(white, 0) 80px, rgba(white, 0) calc(100% - 80px), white);
  	}

      @media (max-width:900px) {
      --image-size: #{$min-image-size};
      --image-size: min(max(#{$min-image-size}, 10vw), #{$max-image-size});
  	}

    @keyframes marquee {
  	0%   { transform: translateX(0%); }
  	100% { transform: translateX(-100%); }
    }
{% endstylesheet %}

{% schema %}
{
   "name": "Logo Slider",
   "max_blocks": 20,
   "settings": [
     {
       "type": "select",
       "id": "slideshow_width",
       "label": "Layout",
       "options": [
         {
           "value": "full",
           "label": "Full-width"
         },
         {
           "value": "contained",
           "label": "Contained"
         }
       ],
       "default": "full"
     },
  {
       "type": "checkbox",
       "id": "show_brands_slider",
       "label": "Enable brands slider",
	"default": true
     },

     {
       "type": "header",
       "content": "Info"
     },
     {
       "type": "paragraph",
       "content": "You may upload up to 25 brands"
     },
  {
       "type": "paragraph",
       "content": "Please try to use the same pixel size for all images - I've suggested 133px by 73px but you can use whatever other size you want"
     }

],
    "blocks" : [
     {
       "type": "brand",
       "name": "Brand",
       "settings": [
     {
       "type": "header",
       "content": "Brand"
     },
     {
       "type": "image_picker",
       "id": "slideshow_image",
       "label": "Image",
	"info": "133 x 73px png recommended"
     },
     {
       "type": "url",
       "id": "brand_link",
       "label": "Link URL"
     }
  ]
	 }
],
 "presets": [{
   "name": "Logo Slideshow",
   "category": "Image",
   "settings": {
   },
   "blocks": [
     {
       "type": "brand"
     },
     {
       "type": "brand"
     },
     {
       "type": "brand"
     },
     {
       "type": "brand"
     }
   ]
 }]
}
{% endschema %}

{% javascript %}
  $('.logos-slider').slick({
  slidesToShow: 4,
  slidesToScroll: 1,
  autoplay: true,
  autoplaySpeed: 1500,
  arrows: false,
  dots: false,
  pauseOnHover: false,
  responsive: [{
  breakpoint: 768,
  settings: {
  slidesToShow: 3
  }
  }, {
  breakpoint: 520,
  settings: {
  slidesToShow: 2
  }
  }]
  });
{% endjavascript %}
